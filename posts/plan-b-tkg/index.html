<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Plan B: TKG · DaShaun
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="DaShaun Carter">
<meta name="description" content="During the lockdown I&rsquo;ve been &ldquo;drinking from the firehose&rdquo; trying to learn all of the Tanzu products.
I&rsquo;ve even been lucky enough to get custom coaching from experts like Sean Noyes - Tanzu Observability, and Jason Marchesano - NSXT.
Some products are easier to learn than others.  Tanzu Observability is a SaaS product, so no homelab required.
NSX-T on the other hand, 3.0 specifically, takes newer hardware and with VSphere 7, everyone is learning the new tricks and traps.">
<meta name="keywords" content="dashaun,blog,developer,personal">
<meta name="fediverse:creator" content="" />


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://dashaun.com/images/avatar.png">
  <meta name="twitter:title" content="Plan B: TKG">
  <meta name="twitter:description" content="During the lockdown I’ve been “drinking from the firehose” trying to learn all of the Tanzu products. I’ve even been lucky enough to get custom coaching from experts like Sean Noyes - Tanzu Observability, and Jason Marchesano - NSXT. Some products are easier to learn than others. Tanzu Observability is a SaaS product, so no homelab required. NSX-T on the other hand, 3.0 specifically, takes newer hardware and with VSphere 7, everyone is learning the new tricks and traps.">

<meta property="og:url" content="https://dashaun.com/posts/plan-b-tkg/">
  <meta property="og:site_name" content="DaShaun">
  <meta property="og:title" content="Plan B: TKG">
  <meta property="og:description" content="During the lockdown I’ve been “drinking from the firehose” trying to learn all of the Tanzu products. I’ve even been lucky enough to get custom coaching from experts like Sean Noyes - Tanzu Observability, and Jason Marchesano - NSXT. Some products are easier to learn than others. Tanzu Observability is a SaaS product, so no homelab required. NSX-T on the other hand, 3.0 specifically, takes newer hardware and with VSphere 7, everyone is learning the new tricks and traps.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-04-21T23:23:29-05:00">
    <meta property="article:modified_time" content="2025-02-24T16:16:50-06:00">
    <meta property="og:image" content="https://dashaun.com/images/avatar.png">




<link rel="canonical" href="https://dashaun.com/posts/plan-b-tkg/">


<link rel="preload" href="https://dashaun.com/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://dashaun.com/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://dashaun.com/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="https://dashaun.com/css/coder.min.07092c1350ffd254998dc43a44ae96e617d14af4df4602626878df89189c5e1a.css" integrity="sha256-BwksE1D/0lSZjcQ6RK6W5hfRSvTfRgJiaHjfiRicXho=" crossorigin="anonymous" media="screen" />








 




<link rel="icon" type="image/svg+xml" href="https://dashaun.com/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="https://dashaun.com/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://dashaun.com/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="https://dashaun.com/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://dashaun.com/images/apple-touch-icon.png">

<link rel="manifest" href="https://dashaun.com/site.webmanifest">
<link rel="mask-icon" href="https://dashaun.com/images/safari-pinned-tab.svg" color="#5bbad5">









</head>




<body class="preload-transitions colorscheme-light">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://dashaun.com/">
      DaShaun
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list" id="header-navigation-list">
        
          
            
            <li class="navigation-item">
              <a class="navigation-link" href="https://dashaun.com/posts/let-me-introduce-myself/">About</a>
            </li>
            
          
            
            <li class="navigation-item">
              <a class="navigation-link" href="https://dashaun.com/posts/">Posts</a>
            </li>
            
          
            
            <li class="navigation-item">
              <a class="navigation-link" href="https://dashaun.com/events/">Events</a>
            </li>
            
          
            
            <li class="navigation-item" id="twitch-status">
              <a class="navigation-link" href="https://twitch.tv/javagrunt">Follow me on Twitch</a>
            </li>
            
          
        
        
      </ul>
    
  </section>
</nav>
<script>
  class TwitchMenuStatus {
    constructor() {
      this.element = document.getElementById('twitch-status');
      this.checkInterval = 60000; 
      this.statusEndpoint = 'https://api.dashaun.com/twitch/stream-status';
    }

    async checkStatus() {
      try {
        const response = await fetch(this.statusEndpoint);
        if (!response.ok) return;

        const data = await response.json();
        const link = this.element.querySelector('.navigation-link');

        if (data.isLive) {
          this.element.classList.add('live');
          link.innerHTML = '🔴 Watch Live Now on Twitch';
          
          link.title = `${data.streamTitle} (${data.viewerCount} viewers)`;
        } else {
          this.element.classList.remove('live');
          link.innerHTML = 'Follow me on Twitch';
          link.title = '';
        }
      } catch (error) {
        
      }
    }

    async initialize() {
      await this.checkStatus();
      setInterval(() => this.checkStatus(), this.checkInterval);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    const twitchStatus = new TwitchMenuStatus();
    twitchStatus.initialize();
  });
</script>

<style>
  #twitch-status.live .navigation-link {
    color: #e91916;
    font-weight: bold;
  }

  @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.8; }
    100% { opacity: 1; }
  }

  #twitch-status.live {
    animation: pulse 2s infinite;
  }
</style>

    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://dashaun.com/posts/plan-b-tkg/">
              Plan B: TKG
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              Published
              <time datetime='2020-04-21T23:23:29-05:00'>
                April 21, 2020
              </time>
            </span>
            
            
            
            <span class="updated-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              Updated
              <time datetime='2020-04-21T23:23:29-05:00'>
                February 24, 2025
              </time>
            </span>
            
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              7-minute read
            </span>
          </div>
          
        </div>
      </header>

      <div>
        
        <p>During the lockdown I&rsquo;ve been &ldquo;drinking from the firehose&rdquo; trying to learn all of the Tanzu products.
I&rsquo;ve even been lucky enough to get custom coaching from experts like Sean Noyes - Tanzu Observability, and Jason Marchesano - NSXT.
Some products are easier to learn than others.  Tanzu Observability is a SaaS product, so no homelab required.
NSX-T on the other hand, 3.0 specifically, takes newer hardware and with VSphere 7, everyone is learning the new tricks and traps.</p>
<p>Well tonight, I ran into blockers on both clusters &ldquo;big&rdquo; and &ldquo;little&rdquo; for different reasons.</p>
<p>The &ldquo;big&rdquo; blocker is that the NICs don&rsquo;t support jumbo frames, and that is a requirement for NSX-T.
The &ldquo;little&rdquo; blocker is that the lifecycle management (LCM) setup, new with VSphere 7, can&rsquo;t be used with the new NSX-T manager.
On top of that, I couldn&rsquo;t figure out how to disable the LCM causing the issue.</p>
<p>I spent about five hours of the day turning knobs in my homelab.
I learned.
I am upgraded for sure.
But I didn&rsquo;t accomplish any of the goals I had set.</p>
<p>A little afterhours Slack, ended up resulting in serious FOMO.
Hat-tip to Craig Erdmann for inspiring me to NOT call it a night.</p>
<p>I switched gears to <a href="https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid/1.0/vmware-tanzu-kubernetes-grid-10/"  class="external-link" target="_blank" rel="noopener">TKG</a>.</p>
<h2 id="plan-b">
  Plan B
  <a class="heading-link" href="#plan-b">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>What follows is my late night notes, after a long day with little progress.
They are really notes-to-self, so I apologize for nothing.</p>
<ul>
<li>
<p>Download TKG CLI for both Mac and Linux because I planned on doing everything twice</p>
</li>
<li>
<p>Download the 2 OVA files</p>
<ul>
<li>OVA for node VMs: photon-3-v1.17.3_vmware.2.ova</li>
<li>OVA for load balancer VMs: photon-3-capv-haproxy-v0.6.3_vmware.1.ova</li>
</ul>
</li>
<li>
<p>Install CLI</p>
<ul>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ tkg version
</span></span><span style="display:flex;"><span>   Client:
</span></span><span style="display:flex;"><span>   	Version: v1.0.0
</span></span><span style="display:flex;"><span>   	Git commit: 60f6fd5f40101d6b78e95a33334498ecca86176e
</span></span></code></pre></div></li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#666">$</span> tkg <span style="color:#666">--</span>help
</span></span><span style="display:flex;"><span>   VMware Tanzu Kubernetes Grid
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Consistently deploy <span style="color:#007020;font-weight:bold">and</span> operate upstream Kubernetes across a variety of infrastructure providers<span style="color:#666">.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Documentation: https:<span style="color:#666">//</span>docs<span style="color:#666">.</span>vmware<span style="color:#666">.</span>com<span style="color:#666">/</span>en<span style="color:#666">/</span>VMware<span style="color:#666">-</span>Tanzu<span style="color:#666">-</span>Kubernetes<span style="color:#666">-</span>Grid<span style="color:#666">/</span>index<span style="color:#666">.</span>html
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Usage:
</span></span><span style="display:flex;"><span>     tkg [command]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Available Commands:
</span></span><span style="display:flex;"><span>     add         Add an existing resource to the current configuration
</span></span><span style="display:flex;"><span>     config      Generate Cluster API provider configuration <span style="color:#007020;font-weight:bold">and</span> cluster plans <span style="color:#007020;font-weight:bold">for</span> creating Tanzu Kubernetes clusters
</span></span><span style="display:flex;"><span>     create      Create a Tanzu Kubernetes cluster
</span></span><span style="display:flex;"><span>     delete      Delete a management cluster <span style="color:#007020;font-weight:bold">or</span> Tanzu Kubernetes cluster
</span></span><span style="display:flex;"><span>     get         Get Tanzu Kubernetes Grid resource(s)
</span></span><span style="display:flex;"><span>     help        Help about any command
</span></span><span style="display:flex;"><span>     init        Create a Tanzu Kubernetes Grid management cluster
</span></span><span style="display:flex;"><span>     scale       Scale a Tanzu Kubernetes cluster
</span></span><span style="display:flex;"><span>     set         Configure some aspect of the Tanzu Kubernetes Grid CLI
</span></span><span style="display:flex;"><span>     version     Display the version of the Tanzu Kubernetes Grid CLI
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Flags:
</span></span><span style="display:flex;"><span>         <span style="color:#666">--</span>config string       <span style="color:#007020">Path</span> to the the TKG config file (default is <span style="color:#666">$</span>HOME<span style="color:#666">/.</span>tkg<span style="color:#666">/</span>config<span style="color:#666">.</span>yaml)
</span></span><span style="display:flex;"><span>     <span style="color:#666">-</span>h, <span style="color:#666">--</span>help                help <span style="color:#007020;font-weight:bold">for</span> tkg
</span></span><span style="display:flex;"><span>         <span style="color:#666">--</span>kubeconfig string   Optional, The kubeconfig file containing the management cluster<span style="color:#4070a0">&#39;s context</span>
</span></span><span style="display:flex;"><span>         <span style="color:#666">--</span>log_file string     If non<span style="color:#666">-</span>empty, use this <span style="color:#007020">log</span> file
</span></span><span style="display:flex;"><span>     <span style="color:#666">-</span>q, <span style="color:#666">--</span>quiet               Quiet (no output)
</span></span><span style="display:flex;"><span>     <span style="color:#666">-</span>v, <span style="color:#666">--</span>v Level             number <span style="color:#007020;font-weight:bold">for</span> the <span style="color:#007020">log</span> level verbosity
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Use <span style="color:#4070a0">&#34;tkg [command] --help&#34;</span> <span style="color:#007020;font-weight:bold">for</span> more information about a command<span style="color:#666">.</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>Install both OVAs and convert both to templates</p>
<ul>
<li><a href="https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid/1.0/vmware-tanzu-kubernetes-grid-10/GUID-install-tkg-vsphere.html#import-baseos"  class="external-link" target="_blank" rel="noopener">https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid/1.0/vmware-tanzu-kubernetes-grid-10/GUID-install-tkg-vsphere.html#import-baseos</a></li>
</ul>
</li>
<li>
<p>Make sure that Docker is running on Mac</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#666">$</span> tkg init <span style="color:#666">--</span>ui
</span></span><span style="display:flex;"><span>Logs of the command execution can also be found at: <span style="color:#666">/</span><span style="color:#007020;font-weight:bold">var</span><span style="color:#666">/</span>folders<span style="color:#666">/</span>t8<span style="color:#666">/</span>rn7bbfjs559_9dm5gx8tzb640000gn<span style="color:#666">/</span>T<span style="color:#666">/</span>tkg<span style="color:#666">-</span><span style="color:#40a070">20200421</span>T234346350986334<span style="color:#666">.</span>log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Validating the pre<span style="color:#666">-</span>requisites<span style="color:#666">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Error: kubectl prerequisites validation failed: kubectl client version v1<span style="color:#666">.</span><span style="color:#40a070">15.5</span> is less than minimum supported kubectl client version <span style="color:#40a070">1.16</span><span style="color:#666">.</span><span style="color:#40a070">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Detailed <span style="color:#007020">log</span> about the failure can be found at: <span style="color:#666">/</span><span style="color:#007020;font-weight:bold">var</span><span style="color:#666">/</span>folders<span style="color:#666">/</span>t8<span style="color:#666">/</span>rn7bbfjs559_9dm5gx8tzb640000gn<span style="color:#666">/</span>T<span style="color:#666">/</span>tkg<span style="color:#666">-</span><span style="color:#40a070">20200421</span>T234346350986334<span style="color:#666">.</span>log
</span></span></code></pre></div></li>
<li>
<p>Quick fix to upgrade kubectl on the mac&hellip;maybe not</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#666">$</span> brew upgrade kubectl
</span></span><span style="display:flex;"><span>Updating Homebrew<span style="color:#666">...</span>
</span></span><span style="display:flex;"><span>Ignoring path homebrew<span style="color:#666">-</span>cask<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span>To restore the stashed changes to <span style="color:#666">/</span>usr<span style="color:#666">/</span>local<span style="color:#666">/</span>Homebrew<span style="color:#666">/</span>Library<span style="color:#666">/</span>Taps<span style="color:#666">/</span>homebrew<span style="color:#666">/</span>homebrew<span style="color:#666">-</span>cask run:
</span></span><span style="display:flex;"><span>  <span style="color:#4070a0">&#39;cd /usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask &amp;&amp; git stash pop&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Auto<span style="color:#666">-</span>updated Homebrew<span style="color:#666">!</span>
</span></span><span style="display:flex;"><span>Updated <span style="color:#40a070">5</span> taps (homebrew<span style="color:#666">/</span>cask<span style="color:#666">-</span>versions, homebrew<span style="color:#666">/</span>core, homebrew<span style="color:#666">/</span>cask, minio<span style="color:#666">/</span>stable <span style="color:#007020;font-weight:bold">and</span> snyk<span style="color:#666">/</span>tap)<span style="color:#666">.</span>
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Updated Formulae
</span></span><span style="display:flex;"><span>minio<span style="color:#666">/</span>stable<span style="color:#666">/</span>minio <span style="">✔</span>   allure                 dolt                   jenkins                lft                    lxc                    sile                   vttest
</span></span><span style="display:flex;"><span>openssl<span style="">@</span><span style="color:#40a070">1.1</span> <span style="">✔</span>          conan                  gitlab<span style="color:#666">-</span>runner          juju                   libosmium              phoronix<span style="color:#666">-</span>test<span style="color:#666">-</span>suite    texlab
</span></span><span style="display:flex;"><span>snyk<span style="color:#666">/</span>tap<span style="color:#666">/</span>snyk <span style="">✔</span>        contentful<span style="color:#666">-</span>cli         goreleaser             lazygit                libxmlsec1             prometheus             vala
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Updated Casks
</span></span><span style="display:flex;"><span><span style="color:#40a070">4</span>k<span style="color:#666">-</span>video<span style="color:#666">-</span>downloader           fantastical                   glip                          krisp                         postbox                       stand
</span></span><span style="display:flex;"><span>abstract                      focuswriter                   glyphs                        latexit                       postico                       terminus
</span></span><span style="display:flex;"><span>airdisplay                    fontbase                      google<span style="color:#666">-</span>chrome                 macpilot                      powershell<span style="color:#666">-</span>preview            trilium<span style="color:#666">-</span>notes
</span></span><span style="display:flex;"><span>brave<span style="color:#666">-</span>browser<span style="color:#666">-</span>dev             fsnotes                       google<span style="color:#666">-</span>earth<span style="color:#666">-</span>pro              mailbutler                    praat                         ultimaker<span style="color:#666">-</span>cura
</span></span><span style="display:flex;"><span>chromium                      futuniuniu                    gpower                        melodics                      qownnotes                     universal<span style="color:#666">-</span>media<span style="color:#666">-</span>server
</span></span><span style="display:flex;"><span>clover<span style="color:#666">-</span>configurator           ganache                       harvest                       microsoft<span style="color:#666">-</span>edge<span style="color:#666">-</span>beta           scaleft                       visual<span style="color:#666">-</span>studio<span style="color:#666">-</span>code<span style="color:#666">-</span>insiders
</span></span><span style="display:flex;"><span>cryptomator                   gearboy                       hubstaff                      opera<span style="color:#666">-</span>beta                    screen                        zappy
</span></span><span style="display:flex;"><span>dcv<span style="color:#666">-</span>viewer                    gearsystem                    iglance                       opera<span style="color:#666">-</span>developer               second<span style="color:#666">-</span>life<span style="color:#666">-</span>viewer            zoomus
</span></span><span style="display:flex;"><span>docker<span style="color:#666">-</span>edge                   geogebra                      insync                        osu<span style="color:#666">-</span>development               session
</span></span><span style="display:flex;"><span>drama                         github                        kapow                         parallels                     sound<span style="color:#666">-</span>control
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Deleted Casks
</span></span><span style="display:flex;"><span>safaricookiecutter                                                                          safarisort
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Upgrading <span style="color:#40a070">1</span> outdated package:
</span></span><span style="display:flex;"><span>kubectl <span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">1</span> <span style="color:#666">-&gt;</span> <span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">2</span>
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Upgrading kubectl <span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">1</span> <span style="color:#666">-&gt;</span> <span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">2</span> 
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Downloading https:<span style="color:#666">//</span>homebrew<span style="color:#666">.</span>bintray<span style="color:#666">.</span>com<span style="color:#666">/</span>bottles<span style="color:#666">/</span>kubernetes<span style="color:#666">-</span>cli<span style="color:#666">-</span><span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">2.</span>catalina<span style="color:#666">.</span>bottle<span style="color:#666">.</span>tar<span style="color:#666">.</span>gz
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Downloading from https:<span style="color:#666">//</span>akamai<span style="color:#666">.</span>bintray<span style="color:#666">.</span>com<span style="color:#666">/</span><span style="color:#40a070">5</span>f<span style="color:#666">/</span><span style="color:#40a070">5</span>f7df7b8226c75aff03a754057cef41150260e3a968d6fc4282738b01b1d8911<span style="">?</span>__gda__<span style="color:#666">=</span><span style="color:#007020">exp</span><span style="color:#666">=</span><span style="color:#40a070">1587531453</span><span style="color:#666">~</span>hmac<span style="color:#666">=</span><span style="color:#40a070">333382</span>f0ebbe1c732da937d9e888ecc5b2cc056
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">######################################################################## 100.0%</span>
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Pouring kubernetes<span style="color:#666">-</span>cli<span style="color:#666">-</span><span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">2.</span>catalina<span style="color:#666">.</span>bottle<span style="color:#666">.</span>tar<span style="color:#666">.</span>gz
</span></span><span style="display:flex;"><span>Error: The <span style="">`</span>brew link<span style="">`</span> step did <span style="color:#007020;font-weight:bold">not</span> complete successfully
</span></span><span style="display:flex;"><span>The formula built, but is <span style="color:#007020;font-weight:bold">not</span> symlinked into <span style="color:#666">/</span>usr<span style="color:#666">/</span>local
</span></span><span style="display:flex;"><span>Could <span style="color:#007020;font-weight:bold">not</span> symlink bin<span style="color:#666">/</span>kubectl
</span></span><span style="display:flex;"><span>Target <span style="color:#666">/</span>usr<span style="color:#666">/</span>local<span style="color:#666">/</span>bin<span style="color:#666">/</span>kubectl
</span></span><span style="display:flex;"><span>already exists<span style="color:#666">.</span> You may want to remove it:
</span></span><span style="display:flex;"><span>  rm <span style="color:#4070a0">&#39;/usr/local/bin/kubectl&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>To force the link <span style="color:#007020;font-weight:bold">and</span> overwrite all conflicting files:
</span></span><span style="display:flex;"><span>  brew link <span style="color:#666">--</span>overwrite kubernetes<span style="color:#666">-</span>cli
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>To list all files that would be deleted:
</span></span><span style="display:flex;"><span>  brew link <span style="color:#666">--</span>overwrite <span style="color:#666">--</span>dry<span style="color:#666">-</span>run kubernetes<span style="color:#666">-</span>cli
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Possible conflicting files are:
</span></span><span style="display:flex;"><span><span style="color:#666">/</span>usr<span style="color:#666">/</span>local<span style="color:#666">/</span>bin<span style="color:#666">/</span>kubectl
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Caveats
</span></span><span style="display:flex;"><span>Bash completion has been installed to:
</span></span><span style="display:flex;"><span>  <span style="color:#666">/</span>usr<span style="color:#666">/</span>local<span style="color:#666">/</span>etc<span style="color:#666">/</span>bash_completion<span style="color:#666">.</span>d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>zsh completions have been installed to:
</span></span><span style="display:flex;"><span>  <span style="color:#666">/</span>usr<span style="color:#666">/</span>local<span style="color:#666">/</span>share<span style="color:#666">/</span>zsh<span style="color:#666">/</span>site<span style="color:#666">-</span>functions
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Summary
</span></span><span style="display:flex;"><span><span style="">�</span>  <span style="color:#666">/</span>usr<span style="color:#666">/</span>local<span style="color:#666">/</span>Cellar<span style="color:#666">/</span>kubernetes<span style="color:#666">-</span>cli<span style="color:#666">/</span><span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">2</span>: <span style="color:#40a070">232</span> files, <span style="color:#40a070">49.1</span>MB
</span></span><span style="display:flex;"><span>Removing: <span style="color:#666">/</span>usr<span style="color:#666">/</span>local<span style="color:#666">/</span>Cellar<span style="color:#666">/</span>kubernetes<span style="color:#666">-</span>cli<span style="color:#666">/</span><span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">1.</span><span style="color:#666">..</span> (<span style="color:#40a070">232</span> files, <span style="color:#40a070">49.1</span>MB)
</span></span><span style="display:flex;"><span>Removing: <span style="color:#666">/</span>Users<span style="color:#666">/</span>dcarter<span style="color:#666">/</span>Library<span style="color:#666">/</span>Caches<span style="color:#666">/</span>Homebrew<span style="color:#666">/</span>kubernetes<span style="color:#666">-</span>cli<span style="color:#666">--</span><span style="color:#40a070">1.18</span><span style="color:#666">.</span><span style="color:#40a070">1.</span>catalina<span style="color:#666">.</span>bottle<span style="color:#666">.</span>tar<span style="color:#666">.</span>gz<span style="color:#666">...</span> (<span style="color:#40a070">13.3</span>MB)
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> Checking <span style="color:#007020;font-weight:bold">for</span> dependents of upgraded formulae<span style="color:#666">...</span>
</span></span><span style="display:flex;"><span><span style="color:#666">==&gt;</span> No dependents found<span style="color:#666">!</span>
</span></span></code></pre></div><p>I have a kubectl that isn&rsquo;t managed by brew!  What was I thinking? Easy fix.  YOLO.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ rm /usr/local/bin/kubectl
</span></span><span style="display:flex;"><span>$ brew upgrade kubectl
</span></span><span style="display:flex;"><span>Updating Homebrew...
</span></span><span style="display:flex;"><span>Warning: kubectl 1.18.2 already installed
</span></span><span style="display:flex;"><span>$ brew link --overwrite kubernetes-cli
</span></span><span style="display:flex;"><span>  Linking /usr/local/Cellar/kubernetes-cli/1.18.2... 228 symlinks created
</span></span></code></pre></div></li>
<li>
<p>Try to init this again!</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#666">$</span> tkg init <span style="color:#666">--</span>ui
</span></span><span style="display:flex;"><span>  Logs of the command execution can also be found at: <span style="color:#666">/</span><span style="color:#007020;font-weight:bold">var</span><span style="color:#666">/</span>folders<span style="color:#666">/</span>t8<span style="color:#666">/</span>rn7bbfjs559_9dm5gx8tzb640000gn<span style="color:#666">/</span>T<span style="color:#666">/</span>tkg<span style="color:#666">-</span><span style="color:#40a070">20200421</span>T235126300226895<span style="color:#666">.</span>log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Validating the pre<span style="color:#666">-</span>requisites<span style="color:#666">...</span>
</span></span><span style="display:flex;"><span>  Serving kickstart UI at http:<span style="color:#666">//</span><span style="color:#40a070">127.0</span><span style="color:#666">.</span><span style="color:#40a070">0.1</span>:<span style="color:#40a070">8080</span>
</span></span></code></pre></div><p>Browser pops up with UI!  Now I feel like I&rsquo;m doing something!</p>
</li>
</ul>
<p><img src="https://dashaun.com/images/blog/plan-b-tkg/tkg-ui.png" alt="TKG UI"></p>
<p>It&rsquo;s giving me the option of deploying to VSphere or AWS.
I would probably have success by choosing AWS, but that feels like the easy path.
I am trying to learn here, so I&rsquo;ll keep deploying to my &ldquo;big&rdquo; cluster on VSphere.</p>
<p>After entering the VCenter Server info to validate VSphere, I&rsquo;m shown this message:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>You are about to provision a Kubernetes cluster on a vSphere 7.0.0 cluster that has not been optimized for Kubernetes. For the best experience of Kubernetes on vSphere, contact your vSphere administrator and ask them to enable the vSphere with Kubernetes feature.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed without enabling the vSphere with Kubernetes feature?
</span></span></code></pre></div><p>Yep! &ldquo;Proceed&rdquo;</p>
<h3 id="development-or-production">
  Development or Production?
  <a class="heading-link" href="#development-or-production">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>I choose &ldquo;Production&rdquo; control plane, which means 3 VMs, and I choose &ldquo;small&rdquo; instance types.</li>
<li>I give the management cluster a name &ldquo;plan-b-m-g-m-t&rdquo; because its late, I&rsquo;m tired, and it rhymes.</li>
<li>I select the only api server load balancer available from the list.</li>
</ul>
<h3 id="resources">
  Resources?
  <a class="heading-link" href="#resources">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>Resource Pool: There is a &ldquo;big/Resources&rdquo; option which sounds good.</li>
<li>VM Folder: There is &ldquo;/vm&rdquo; option or &ldquo;/vm/discovered vms&rdquo; so I&rsquo;ll choose &ldquo;/vm&rdquo;</li>
<li>Datastore: I choose the vsan option that is in the &ldquo;big&rdquo; cluster.</li>
</ul>
<h3 id="kubernetes-network-settings">
  Kubernetes Network Settings:
  <a class="heading-link" href="#kubernetes-network-settings">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>Network Name: big-tkg-pg</li>
<li>Cluster Services CIDR: default: 100.64.0.0/13</li>
<li>Cluster POD CIDR: default: 100.96.0.0/11</li>
</ul>
<h3 id="images">
  Images
  <a class="heading-link" href="#images">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>OS Image with Kubernetes v1.17.3+vmware.2
There is only 1 option in my list right now, lets give it a try!</li>
</ul>
<p>There is a &ldquo;review&rdquo; section to check my work.
It all looks good.
At this point, it is after midnight.
I just want to get something working.  <br>
I want to go to bed having accomplished something.</p>
<p><strong>Click the button!</strong></p>
<p>I made it about 10 minutes into the install.
4/8 Complete.
I just couldn&rsquo;t sit and watch log lines anymore.
When I checked back in the morning, that totally didn&rsquo;t work for me!</p>
<h2 id="plan-c">
  Plan C?
  <a class="heading-link" href="#plan-c">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Frustrated.  I take the AWS path.
As I expected, that worked first try, I&rsquo;ll share that information later.
I basically spent the rest of the day using TKG on AWS.</p>
<h2 id="back-to-plan-b">
  Back to Plan B
  <a class="heading-link" href="#back-to-plan-b">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Having stepped away from the problem, and having success on AWS, I took time to read the documentation.
I realized that I needed to have DHCP setup for the Cluster Services CIDR.
I had DHCP setup, but not for the subnet that I wanted to use.
I deployed a pfsense appliance to the cluster to provide DHCP for this subnet and on this specific portgroup.</p>
<p>Step through the above steps again, and everything works!</p>
<p><img src="https://dashaun.com/images/blog/plan-b-tkg/tkg-success.png" alt="TKG UI"></p>
<p>It took time, but reading the docs helped me find success!</p>

      </div>


      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2025
     DaShaun Carter 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="https://dashaun.com/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
